<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>중간 과제 첫 화면</title>
  
</head>
<body>
    <form action='/send_search_text' method='POST'>
    검색어 <input type='text' name='searchText' placeholder="검색어를 입력해주세요."><br>
    아이디 <input type='email' name='loginId' placeholder="아이디를 입력해주세요.">
    <input type='submit' id='submitBtn' value='전송'>
    </form>

    <button id='ajaxSend'>비동기 버튼</button> 

    <div class='ajaxResult'></div>

    <script>
        document.querySelector('#ajaxSend').addEventListener('click', function(){
            var searchText = JSON.stringify(document.forms[0].elements[0].value);
            var loginId = JSON.stringify(document.forms[0].elements[1].value);
            
            var parameter = {};
            parameter['searchText'] = searchText;
            parameter['loginId'] = loginId;

            console.log('파라미터: '+ JSON.stringify(parameter));
            var xhr = new XMLHttpRequest();
            xhr.open('POST', 'http://localhost:3000/receive_ajax')
            xhr.setRequestHeader('Content-Type',"application/json")
            xhr.send(JSON.stringify(parameter));
        })
    
    </script>
</body>
</html>